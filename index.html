<!DOCTYPE <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>WordGuess</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/style.css">
    <script src="main.js"></script>
</head>

<body>

    <h1>Welcome to the Word Guess Game!! Press any key to get started!</h1>

    <br>

    <div id ="hanghere">
        <canvas id="myCanvas" width="300" height="600">
    This is the canvas where the hangman image(s) will be displayed
    </canvas>
    </div>

    <p>Wins</p><br>
    <p id="userwins"></p>

    <br>

    <p>Current word</p>
    <br>
    <p id="currentword"></p>

    <br>



    <p>Number Of Guesses Remaining</p><br>
    <p id="userguessesleft"></p>


    <br>

    <p>Letters already guessed</p><br>

    <p id="guesslist"></p>


    <script type="text/javascript">
        var userwins = 0;
        var userlosses = 0;

        var wordlist = [
            "battleground",
            "monkey",
            "clarinet",
            "racecar",
            "pokemon",
            "pirate",
            "nutrition",
            "starting",
            "dolphin",
            "superhero"
        ];


        var randomword = wordlist[Math.floor(Math.random() * wordlist.length)];
        var currentword = document.getElementById("currentword");
        var displayedguesses = document.getElementById("guesslist");
        var currentlydispplayedstring = makewordalldashes(randomword);
        var userwins = 0;
        var displayeduserwins = document.getElementById("userwins");
        displayeduserwins.textContent = userwins;
        var userguessesleft = 13;
        var userguesslinktohtml = document.getElementById("userguessesleft");
        userguesslinktohtml.textContent = userguessesleft;
        currentword.textContent = currentlydispplayedstring.split('').join(' ');
        var userguesslist = [];
        displayedguesses.textContent = userguesslist;


        function makewordalldashes(wordtobechanged) {
            var newstring = "";
            for (i = 0; i < wordtobechanged.length; i++) {
                newstring = newstring + "_";
            }
            return newstring;
        };
        function diduserpressviablekey(userinput) {
            var alphabetstring = "abcdefghijklmnopqrstuvwxyz";
            return (alphabetstring.includes(userinput) && !(userguesslist.includes(userinput)));
        }

        function replacedasheswithletters(letterchosen) {
            var result = currentlydispplayedstring;
            console.log();
            for (var i = 0; i < randomword.length; i++) {
                if (randomword[i] == letterchosen) {
                    //replacing the letter in the displayed string using substring method
                    result = result.substring(0, i) + letterchosen + result.substring(i + 1, result.length);
                    console.log(result);
                }
            }
            return result;
        }

        //this function is run whenever a user presses a key
        document.onkeyup = function (event) {
            if (diduserpressviablekey(event.key)) {

                // displayedguesses.textContent = userguesslist.join(' ');

                //now we check if the key was a right answer and add it to the guessed word list either way
                if (randomword.includes(event.key)) {
                    // console.log("regiestered included event key");

                    currentlydispplayedstring = replacedasheswithletters(event.key);
                    if (currentlydispplayedstring == randomword) {
                        console.log("Word has been correctly guessed!!");
                        userwins++;
                        displayeduserwins.textContent = userwins;
                        //generate a new word to play again
                        randomword = wordlist[Math.floor(Math.random() * wordlist.length)];
                        currentlydispplayedstring = makewordalldashes(randomword);
                        //empty prior user guess list
                        userguesslist = [];
                        displayedguesses.textContent = userguesslist;

                        //reset userguesses
                        userguessesleft = 13;
                        userguesslinktohtml.textContent = userguessesleft;

                    }

                } else {
                    userguesslist.push(event.key);
                    //lower user guess chance
                    userguessesleft--;
                    userguesslinktohtml.textContent = userguessesleft;
                    if (userguessesleft === 0) {
                        //user loses, play another game
                        randomword = wordlist[Math.floor(Math.random() * wordlist.length)];
                        currentlydispplayedstring = makewordalldashes(randomword);
                        //empty prior user guess list
                        userguesslist = [];
                        displayedguesses.textContent = userguesslist;
                        
                        //reset userguesses
                        userguessesleft = 13;
                        userguesslinktohtml.textContent = userguessesleft;


                    }

                    displayedguesses.textContent = userguesslist.join(' ');


                }

            }
            //updates the users view of the currentlydisplayedstring
            //also uses the split and join methods to add a space between the underscores/letters
            currentword.textContent = currentlydispplayedstring.split('').join(' ');


        }
       
        


        //now to take care of drawing the hangman

        var canvas = document.getElementById("myCanvas");

        //create a drawing object
        var ctx = canvas.getContext("2d");

        ctx.fillStyle = "#FF0000";
        ctx.fillRect(0,0,300,500);
    </script>


</body>

</html>